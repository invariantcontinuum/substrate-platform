{
  "violations": [
    {
      "id": "drift-001",
      "type": "dependency",
      "title": "Undocumented Database Dependency",
      "description": "SHADOW_TRACKER has undocumented read access to DB_ORDERS",
      "severity": "High",
      "status": "open",
      "highlight": true,
      "between": [
        "DB_ORDERS",
        "SHADOW_TRACKER"
      ],
      "policy": "ADR-022",
      "details": {
        "issue": "Shadow Tracker reads user order data without proper authorization",
        "impact": "Potential GDPR violation - unauthorized PII access",
        "detectedAt": "2024-09-15T10:30:00Z",
        "detectedBy": "graph-analysis",
        "location": {
          "file": "src/analytics/tracker.ts",
          "line": 142,
          "function": "trackUserBehavior"
        },
        "evidence": [
          {
            "type": "code",
            "content": "const orders = await db.query('SELECT * FROM orders WHERE user_id = ?', [userId])"
          },
          {
            "type": "adr",
            "reference": "ADR-022",
            "excerpt": "All data access must be documented in the Intent layer"
          }
        ]
      },
      "suggestedActions": [
        {
          "id": "update_intent",
          "label": "Update Intent Documentation",
          "icon": "FileText",
          "description": "Create ADR amendment to authorize this dependency"
        },
        {
          "id": "refactor_reality",
          "label": "Refactor Reality",
          "icon": "GitCompare",
          "description": "Remove direct DB access, use API instead"
        },
        {
          "id": "false_positive",
          "label": "Mark as False Positive",
          "icon": "CheckCircle",
          "description": "Provide reasoning and suppress this warning"
        }
      ]
    },
    {
      "id": "drift-002",
      "type": "doc",
      "title": "Outdated Architecture Decision Record",
      "description": "ADR-004 specifies deprecated repository pattern",
      "severity": "Medium",
      "status": "open",
      "highlight": true,
      "policy": "ADR-004",
      "details": {
        "document": "ADR-004",
        "title": "Repository Pattern Implementation",
        "lastUpdated": "2024-03-15",
        "problem": "Documented abstract base classes, codebase uses interfaces with DI",
        "driftMetrics": {
          "filesCompliant": 23,
          "filesDrifted": 7,
          "complianceRate": "76.7%"
        },
        "files": [
          "src/orders/repo.ts",
          "src/payments/repository.ts",
          "src/inventory/data-access.ts"
        ]
      },
      "suggestedActions": [
        {
          "id": "update_adr",
          "label": "Update ADR-004",
          "icon": "FileText",
          "description": "Document the new interface-based approach"
        },
        {
          "id": "refactor_old",
          "label": "Refactor 7 Files",
          "icon": "ExternalLink",
          "description": "Migrate remaining files to new pattern"
        },
        {
          "id": "deprecate",
          "label": "Mark as Deprecated",
          "icon": "History",
          "description": "Create ADR-019 to supersede ADR-004"
        }
      ]
    },
    {
      "id": "drift-003",
      "type": "pr",
      "title": "PR Deviation from Caching Strategy",
      "description": "PR #112 uses custom TTL calculation instead of ADR-011 standard",
      "severity": "Medium",
      "status": "open",
      "highlight": false,
      "policy": "ADR-011",
      "details": {
        "pr": "#112",
        "title": "Add caching layer to OrderService",
        "author": "@developer-jane",
        "problem": "Custom TTL formula instead of standardized cache policies",
        "conflicts": [
          {
            "policy": "ADR-011",
            "section": "TTL Calculation",
            "prApproach": "Custom formula based on load",
            "standardApproach": "Fixed tiers (60s, 300s, 3600s)"
          }
        ]
      },
      "suggestedActions": [
        {
          "id": "request_changes",
          "label": "Request Changes",
          "icon": "XCircle",
          "description": "Ask author to align with ADR-011"
        },
        {
          "id": "amend_adr",
          "label": "Propose ADR Amendment",
          "icon": "FileText",
          "description": "If custom TTL is justified, update ADR-011"
        },
        {
          "id": "override",
          "label": "Override with Justification",
          "icon": "CheckCircle",
          "description": "Approve with documented exception"
        }
      ]
    },
    {
      "id": "drift-004",
      "type": "owner",
      "title": "Stale Component Ownership",
      "description": "Checkout_API has no assigned owner after team lead departure",
      "severity": "Critical",
      "status": "open",
      "highlight": false,
      "details": {
        "component": "Checkout_API",
        "previousOwner": "Alex Chen (departed 2024-08-15)",
        "domain": "Payment Processing",
        "riskLevel": "High",
        "problem": "No domain expert assigned, critical bugs pending review",
        "pendingItems": {
          "criticalBugs": 3,
          "openPRs": 2,
          "untriagedIssues": 8
        }
      },
      "suggestedActions": [
        {
          "id": "assign_owner",
          "label": "Assign New Owner",
          "icon": "UserX",
          "description": "Schedule knowledge transfer sessions"
        },
        {
          "id": "document_gaps",
          "label": "Document Knowledge Gaps",
          "icon": "FileText",
          "description": "Create tickets for missing context"
        },
        {
          "id": "escalate",
          "label": "Escalate to EM",
          "icon": "AlertCircle",
          "description": "Urgent - Risk of payment failures"
        }
      ]
    },
    {
      "id": "drift-005",
      "type": "jira",
      "title": "Misleading Jira Ticket Context",
      "description": "TASK-882 scope differs from implementation",
      "severity": "Low",
      "status": "investigating",
      "highlight": false,
      "details": {
        "issue": "TASK-882",
        "summary": "Implement user authentication flow",
        "problem": "Ticket describes OAuth only, PR includes SAML",
        "impact": "Security review flagged unexpected scope expansion"
      },
      "suggestedActions": [
        {
          "id": "update_jira",
          "label": "Update Jira Description",
          "icon": "FileText",
          "description": "Expand ticket to reflect actual scope"
        },
        {
          "id": "split_ticket",
          "label": "Split into Separate Tasks",
          "icon": "ExternalLink",
          "description": "Create TASK-882-1 for OAuth, TASK-882-2 for SAML"
        },
        {
          "id": "revert_scope",
          "label": "Revert to Documented Scope",
          "icon": "History",
          "description": "Remove SAML integration"
        }
      ]
    },
    {
      "id": "drift-006",
      "type": "policy",
      "title": "GDPR Policy Violation - PII Unencrypted",
      "description": "User email field lacks @Private decorator",
      "severity": "Critical",
      "status": "open",
      "highlight": true,
      "policy": "pol-gdpr-data",
      "details": {
        "field": "user.email",
        "location": "src/auth/tracker.ts:142",
        "issue": "Missing @Private decorator required for PII fields",
        "regulation": "GDPR Article 32",
        "dataClassification": "PII"
      },
      "suggestedActions": [
        {
          "id": "add_decorator",
          "label": "Add @Private Decorator",
          "icon": "ShieldCheck",
          "description": "Mark field as PII requiring encryption"
        },
        {
          "id": "review_access",
          "label": "Review Access Patterns",
          "icon": "Search",
          "description": "Audit all access to this field"
        }
      ]
    },
    {
      "id": "drift-007",
      "type": "dependency",
      "title": "Layer Violation - Service Bypassing Event Queue",
      "description": "Inventory service directly calls Notification service",
      "severity": "Medium",
      "status": "open",
      "highlight": false,
      "policy": "substrate.layers",
      "details": {
        "source": "inventory_svc",
        "target": "notification_svc",
        "issue": "Direct HTTP call instead of async event",
        "impact": "Tight coupling, harder to scale"
      },
      "suggestedActions": [
        {
          "id": "use_queue",
          "label": "Use Event Queue",
          "icon": "Layers",
          "description": "Publish event instead of direct call"
        },
        {
          "id": "document_exception",
          "label": "Document Exception",
          "icon": "FileText",
          "description": "If sync call required, document rationale"
        }
      ]
    }
  ],
  "summary": {
    "totalViolations": 7,
    "bySeverity": {
      "Critical": 2,
      "High": 1,
      "Medium": 3,
      "Low": 1
    },
    "byType": {
      "dependency": 2,
      "doc": 1,
      "pr": 1,
      "owner": 1,
      "jira": 1,
      "policy": 1
    },
    "trend": "stable"
  },
  "timeline": [
    {
      "date": "2024-09-01",
      "newViolations": 2,
      "resolvedViolations": 1,
      "totalOpen": 6
    },
    {
      "date": "2024-09-08",
      "newViolations": 1,
      "resolvedViolations": 0,
      "totalOpen": 7
    },
    {
      "date": "2024-09-15",
      "newViolations": 1,
      "resolvedViolations": 1,
      "totalOpen": 7
    },
    {
      "date": "2024-09-22",
      "newViolations": 0,
      "resolvedViolations": 0,
      "totalOpen": 7
    }
  ]
}